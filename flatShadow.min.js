class FlatShadow{constructor(t,e){this.elementToAttachTo=t,this.fsid=Date.now().toString(),this.elementToAttachTo.dataset.fsid=this.fsid,this.isTextNode=this.checkForTextNode();const o=this.elementToAttachTo.attributes;this.angle=o.getNamedItem("flatshadow-angle")?parseInt(o.getNamedItem("flatshadow-angle").value):45,this.color=o.getNamedItem("flatshadow-color")?o.getNamedItem("flatshadow-color").value:this.calculateColor(),this.blur=o.getNamedItem("flatshadowblur")?parseInt(o.getNamedItem("flatshadowblur").value):0,this.shadowLength=o.getNamedItem("FlatShadow-length")?parseInt(o.getNamedItem("flatshadow-length").value):1e3,this.step=o.getNamedItem("FlatShadow-stepsize")?parseInt(o.getNamedItem("flatshadow-stepsize").value):2,this.trackingEnabled=!!o.getNamedItem("flatshadow-enabletracking")&&o.getNamedItem("flatshadow-enabletracking").value,this.loggingEnabled=!!o.getNamedItem("flatshadow-enablelogging")&&o.getNamedItem("flatshadow-enablelogging").value,this.hover=!!o.getNamedItem("flatshadow-hover")&&o.getNamedItem("flatshadow-hover").value,this.forceText=!!o.getNamedItem("flatshadow-forcetext")&&o.getNamedItem("flatshadow-forcetext").value,e&&(e.angle&&(this.angle=e.angle),e.color&&(this.color=e.color),e.blur&&(this.blur=e.blur),e.length&&(this.shadowLength=e.length),e.stepSize&&(this.step=e.stepSize),e.enableTracking&&(this.trackingEnabled=e.enableTracking),e.enableLogging&&(this.trackingEnabled=e.enableLogging),e.hover&&(this.hover=e.hover),e.forceText&&(this.forceText=optios.forceText)),this.renderShadow(),this.createTracker(),this.loggingEnabled&&console.log(this),this.elementDimensions=this.elementToAttachTo.getBoundingClientRect(),this.trackingEnabled&&window.addEventListener("scroll",()=>{this.elementDimensions=this.elementToAttachTo.getBoundingClientRect()})}checkForTouchDevice(){return window.matchMedia("@media (any-hover: none)").matches}checkForTextNode(){let t=!0;return this.elementToAttachTo.childNodes.forEach(e=>{3!=e.nodeType&&(t=!1)}),0===this.elementToAttachTo.childNodes.length&&(t=!1),t}calculateColor(){const t=window.getComputedStyle(this.elementToAttachTo.parentElement).backgroundColor.match(/\d+/gim);return`rgb(${t[0]-10}, ${t[1]-10}, ${t[2]-10})`}renderShadow(){const t=()=>{let t=`0px 0px 0px ${this.color}`;const e=Math.sin(this.angle*(Math.PI/180)).toFixed(2),o=Math.cos(this.angle*(Math.PI/180)).toFixed(2);for(let s=0;s<this.shadowLength;s+=this.step)t+=`, ${s*e}px ${s*o}px ${this.blur}px ${this.color}`;return t};if(document.querySelector(`[data-stylefsid="${this.fsid}"]`))document.querySelector(`[data-stylefsid="${this.fsid}"]`).textContent=`[data-fsid="${this.fsid}"]${this.hover?":hover":""}{\n\t\t\t\t\t\t ${this.isTextNode||this.forceText?"text-shadow: ":"box-shadow: "}${t()} !important;\n\t\t\t\t }`;else{let e=document.createElement("style");e.dataset.stylefsid=`${this.fsid}`,e.textContent=`[data-fsid="${this.fsid}"]${this.hover?":hover":""}{\n\t\t\t\t\t\t ${this.isTextNode||this.forceText?"text-shadow: ":"box-shadow: "}${t()} !important;\n\t\t\t\t }`,document.querySelector("body").appendChild(e)}}createTracker(){this.trackingEnabled&&!this.checkForTouchDevice()&&window.addEventListener("mousemove",t=>{window.requestAnimationFrame(this.trackMouseMovement.bind(this,t))},!0)}trackMouseMovement(t){const e={x:t.clientX,y:t.clientY},o=this.elementDimensions,s={x:o.left+o.width/2,y:o.top+o.height/2},a={x:s.x,y:e.y};if(o.bottom<0||o.top>window.innerHeight)return;const i=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),n=i(e,s),h=i(s,a),l=Math.acos(h/n)*(180/Math.PI);this.angle=e.y<s.y?e.x<s.x?l:-1*l+360:e.x<s.x?-1*l+180:l-180,o.bottom>0&&o.top<window.innerHeight&&this.renderShadow()}setAngle(t){this.angle=t,this.elementDimensions=this.elementToAttachTo.getBoundingClientRect(),this.renderShadow()}setColor(t){this.color=t,this.elementDimensions=this.elementToAttachTo.getBoundingClientRect(),this.renderShadow()}setBlur(t){this.blur=t,this.elementDimensions=this.elementToAttachTo.getBoundingClientRect(),this.renderShadow()}setStepSize(t){this.step=t,this.elementDimensions=this.elementToAttachTo.getBoundingClientRect(),this.renderShadow()}setLength(t){this.shadowLength=t,this.elementDimensions=this.elementToAttachTo.getBoundingClientRect(),this.renderShadow()}}window.addEventListener("DOMContentLoaded",t=>{document.querySelectorAll(".flatShadow").forEach(t=>new FlatShadow(t))});